@startuml
left to right direction
actor "User" as fc
actor "Sonda" as sc
actor "Alarm" as ac
actor "Electric Company" as ec
actor "Power Inverter" as dc

rectangle System {
  usecase "Connect/disconnect panel." as UC1
  usecase "Display energy production and consumption" as UC2
  usecase "Calculate energy provided by panels" as UC3
  usecase "Calculate energy provided by electric network" as UC4
  usecase "Generate warnings" as UC5
  usecase "Emergency button to disconnect the system" as UC6
  usecase "Calculate savings" as UC7
  usecase "On/Off racking" as UC8
  usecase "Current activation status" as UC9
  usecase "Calculate percentage of solar panel energy consumed" as UC10
  usecase "Calculate percentage of energy sent to the electric network" as UC11
  usecase "Performance tracking" as UC12
}
fc --> UC1
dc --> UC1
fc <-- UC2
sc --> UC3
ec -up-> UC4
sc --> UC5
fc --> UC5
ac --> UC6
dc --> UC6
fc --> UC7
ec --> UC7
fc --> UC8
sc --> UC8
fc --> UC9
sc --> UC9
@enduml


ON/OFF activity diagram:
@startuml
(*) --> if "" then
  -->[Manually] "Check account"
  --> "Enter Password"
  if "" then 
    -->[Not successful] "Forgot Password"
    --> "Reset password"
     if "" then
      --> [Not successful] "Return to the initial page"
    else
      --> [Successful] "Click on the botton ON/OFF" as botton
      --> "Security SMS"
      endif
      if "" then
        --> [Received] "Enter security code"
        if "" then 
          -->[Correct] "Permission to turn ON/OFF"
          --> ===B1===
        else 
          -->[Wrong] "Resend SMS" as resend
        endif
      else 
        -->[Not received] resend
      endif
  else
    -->[Successful] botton
  endif
else
  -->[By the system] "Check safety status of the panel (fire)"
  if "" then
    -->[Yes] "TURN OFF" as off
    --> ===B1===
  else 
    -->[No] "Check Battery status"
    if "" then
      -->[Battery>80%] off
    else 
      -->[Battery<80%] "Check consumption vs production balance"
      if "" then
        -->[Consumption<Production] off
      else
        -->[Consumption>Production] "Check panel efficiency"
        if "" then
          -->[<40%] off
        else
          -->[>40%] "TURN ON"
          --> ===B1===
          --> (*)
@enduml

ON/OFF sequence diagram:
@startuml
actor Customer
participant APP
participant System

hnote across: Manually
Customer -> APP: Check account
activate APP
activate Customer
APP -> Customer: Request Password
Customer -> APP: Enter password
APP -> System: Verify password
activate System
return ok
APP -> Customer: Log in succussful
Customer -> APP:  Botton ON/OFF
APP -> Customer: Request security SMS
APP -> System: Send SMS to the customer
activate System
deactivate APP
System -> Customer: Send SMS
Customer -> APP: Enter SMS
activate APP
APP -> System: Request permission
System -->APP: ok
deactivate System
APP -> Customer: Permission to turn ON/OFF
deactivate Customer
deactivate APP
hnote across: By the system
APP -> System: Check safety status (fire)
activate APP
activate System
APP -> System: Check battery status
APP -> System: Check consumption vs production balance
APP -> System: Check efficiency
System --> APP: TURN ON/OFF (according to the requirements)
deactivate APP 
deactivate System
@enduml
